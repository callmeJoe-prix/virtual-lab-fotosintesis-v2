<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="style.css">
</head>

<body>

<div id="container">

    <!-- Leaf -->
    <svg width="200" height="200" id="leaf">
        <ellipse cx="100" cy="100" rx="80" ry="50" fill="#2ecc71"/>
    </svg>

    <!-- Arrow to chloroplast -->
    <svg width="200" height="50" id="arrow1">
        <polygon points="0,25 150,25 150,10 200,25 150,40 150,25" fill="yellow">
            <animate attributeName="opacity"
                     values="0;1;0"
                     dur="1.5s"
                     repeatCount="indefinite"/>
        </polygon>
    </svg>

    <!-- Chloroplast -->
    <svg width="220" height="220" id="chloroplast">
        <ellipse cx="110" cy="110" rx="95" ry="55" fill="#27ae60"/>
        <circle cx="70" cy="110" r="10" fill="#145A32"/>
        <circle cx="110" cy="110" r="10" fill="#145A32"/>
        <circle cx="150" cy="110" r="10" fill="#145A32"/>
    </svg>

    <!-- Oxygen bubbles -->
    <div id="oxygen-container"></div>

</div>

<script>
    // fungsi untuk update animasi
    function updateAnimation(light, co2) {
        // jumlah gelembung tergantung intensitas cahaya & CO2
        const bubbleCount = Math.floor((light/2000) * 20 + (co2/1200) * 10);

        const container = document.getElementById("oxygen-container");
        container.innerHTML = ""; // reset

        for (let i = 0; i < bubbleCount; i++) {
            const bubble = document.createElement("div");
            bubble.className = "bubble";

            bubble.style.left = (200 + Math.random()*100) + "px";
            bubble.style.animationDuration = (2 + Math.random()*2) + "s";
            container.appendChild(bubble);
        }
    }

    // terima data slider dari Streamlit
    window.addEventListener('message', (event) => {
        const data = event.data;

        if (data.type === "update") {
            updateAnimation(data.light, data.co2);
        }
    });
</script>

</body>
</html>
